<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Intraday Calculator — Clean UI</title>
  <style>
    :root{
      --bg:#F6F8FB;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0f62fe;
      --accent-2:#10b981;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      --shadow: 0 6px 18px rgba(16,24,40,0.06);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    }

    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #f7fafc 0%, var(--bg) 100%);
      color:#0f172a; -webkit-font-smoothing:antialiased; padding:20px;
      display:flex; justify-content:center;
    }

    .wrap{max-width:1100px; width:100%;}
    header{display:flex;align-items:center;gap:14px;margin-bottom:14px}
    .logo{
      width:56px;height:56px;border-radius:12px;background:var(--accent);display:grid;place-items:center;color:white;font-weight:800;font-size:20px;
      box-shadow: 0 6px 20px rgba(15,98,254,0.12);
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:2px 0 0; color:var(--muted); font-size:13px}

    .grid{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap:18px;
      align-items:start;
    }
    @media (max-width:980px){
      .grid{grid-template-columns:1fr; padding-bottom:30px}
    }

    .card{background:var(--card); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow);}
    .controls .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    label{display:block;font-weight:600;font-size:13px;margin-bottom:6px;color:#0b1220}
    input[type=number]{width:140px;padding:8px 10px;border-radius:10px;border:1px solid #e6eef6;background:#fbfdff;font-size:14px}
    .radioRow{display:flex;gap:12px;align-items:center}
    .radioRow label{font-weight:600;font-size:14px}
    .actions{display:flex;gap:10px;align-items:center;margin-top:10px}
    button{padding:9px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700;font-size:14px}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid #e6eef6;color:var(--accent);font-weight:700}
    .btn-success{background:var(--accent-2);color:white}

    /* grouped key numbers */
    .key-grid{display:flex;gap:12px;align-items:stretch;flex-wrap:wrap}
    .key{
      background:linear-gradient(180deg, rgba(255,255,255,0.9), var(--card));
      padding:14px;border-radius:12px;flex:1;min-width:150px;border:1px solid #eef6ff;
      display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:8px;
    }
    .key .label{font-size:12px;color:var(--muted);font-weight:700}
    .key .value{font-size:20px;font-weight:800;color:#0b1220}
    .value.small{font-size:15px;font-weight:700;color:#0b1220}

    /* details area */
    .info-table th{font-weight:700;text-align:left;padding:8px 6px;color:#0b1220;font-size:13px}
    .info-table td{padding:8px 6px;color:var(--muted);font-size:13px;text-align:right}

    /* profit table */
    .profit-wrap{margin-top:14px}
    table.profit{width:100%;border-collapse:collapse;background:transparent}
    table.profit th, table.profit td{padding:10px 8px;border-bottom:1px solid #f1f5f9}
    table.profit th{background:transparent;text-align:left;color:#0b1220;font-weight:700}
    table.profit td.right{text-align:right;color:#0b1220;font-weight:700}

    .muted{color:var(--muted);font-size:13px}
    footer{margin-top:14px;color:var(--muted);font-size:13px;text-align:center}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">₹</div>
      <div>
        <h1>Intraday Calculator — Clean UI</h1>
        <p class="lead">Pick Buy / Sell, enter entry price — quantity, stop-loss and profit targets update instantly. Prices shown with one decimal.</p>
      </div>
    </header>

    <div class="grid">
      <!-- left: controls -->
      <div class="card controls">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
          <div style="min-width:160px">
            <label>Action</label>
            <div class="radioRow">
              <label><input type="radio" name="side" value="BUY" checked> Buy</label>
              <label><input type="radio" name="side" value="SELL"> Sell</label>
            </div>
          </div>

          <div>
            <label>Stock Price (Entry ₹)</label>
            <input id="entry" type="number" step="0.1" value="500.0">
          </div>

          <div>
            <label>Capital (₹)</label>
            <input id="capital" type="number" step="1" value="20000">
          </div>

          <div>
            <label>Leverage (X)</label>
            <input id="leverage" type="number" step="0.1" value="5">
          </div>
        </div>

        <div style="margin-top:12px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
          <div style="min-width:140px">
            <label>Total Risk (₹)</label>
            <input id="risk" type="number" step="1" value="2000">
          </div>

          <div style="min-width:140px">
            <label>Default Profit (₹)</label>
            <input id="profitDefault" type="number" step="1" value="2000">
          </div>

          <div style="flex:1"></div>
        </div>

        <div class="actions">
          <button id="calc" class="btn-primary">Calculate</button>
          <button id="copyCSV" class="btn-success">Copy CSV</button>
          <div style="margin-left:auto" class="muted">Quantity = floor(usable capital / entry)</div>
        </div>

        <!-- grouped key values -->
        <div style="margin-top:14px">
          <div class="key-grid">
            <div class="key" id="keyQty">
              <div class="label">Quantity</div>
              <div class="value" id="qtyVal">—</div>
            </div>
            <div class="key" id="keySL">
              <div class="label">Stop-loss price (for total risk)</div>
              <div class="value" id="slVal">—</div>
            </div>
            <div class="key" id="keyTP">
              <div class="label">Target price (for profit)</div>
              <div class="value" id="tpVal">—</div>
            </div>
          </div>
        </div>

        <!-- extra info separated -->
        <div style="margin-top:14px;" class="card" >
          <table style="width:100%" class="info-table">
            <tr><th>Usable capital (₹)</th><td id="usableVal">—</td></tr>
            <tr><th>Total Risk (₹)</th><td id="riskVal">—</td></tr>
            <tr><th>Risk per share (₹)</th><td id="rpsVal">—</td></tr>
            <tr><th>Profit target (₹)</th><td id="profitVal">—</td></tr>
            <tr><th>Profit per share (₹)</th><td id="ppsVal">—</td></tr>
          </table>
        </div>
      </div>

      <!-- right: results & table -->
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
            <div>
              <h3 style="margin:0 0 6px 0">Targets Table</h3>
              <div class="muted">Profit split from ₹500 → ₹10,000 (step ₹500). Prices shown with 1 decimal.</div>
            </div>
            <div class="muted" style="font-size:13px">Entry: <span id="entryShow">—</span></div>
          </div>

          <div class="profit-wrap">
            <table class="profit">
              <thead>
                <tr>
                  <th>Profit Target (₹)</th>
                  <th class="right">Target Price (₹)</th>
                  <th class="right">Qty</th>
                </tr>
              </thead>
              <tbody id="profitBody">
                <!-- filled by JS -->
              </tbody>
            </table>
          </div>
        </div>

        <footer class="card" style="margin-top:12px;">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
            <div class="muted">Made for quick intraday decisioning · One-decimal formatting</div>
            <div class="muted">Buy = price ↑ • Sell = price ↓</div>
          </div>
        </footer>
      </div>
    </div>
  </div>

<script>
  // one-decimal formatter
  function fmt1(n){
    if (typeof n !== 'number' || !isFinite(n)) return '—';
    return n.toFixed(1);
  }

  function calcAll(){
    // inputs
    const side = document.querySelector('input[name="side"]:checked').value;
    const entry = parseFloat(document.getElementById('entry').value) || 0;
    const capital = parseFloat(document.getElementById('capital').value) || 0;
    const leverage = parseFloat(document.getElementById('leverage').value) || 1;
    const risk = parseFloat(document.getElementById('risk').value) || 0;
    const profitDefault = parseFloat(document.getElementById('profitDefault').value) || 0;

    // derived
    const usable = capital * leverage;
    const qty = entry > 0 ? Math.floor(usable / entry) : 0;
    const riskPerShare = qty > 0 ? (risk / qty) : 0;

    // SL price (direction dependent)
    const slPrice = (qty > 0) ? (side === 'BUY' ? (entry - riskPerShare) : (entry + riskPerShare)) : NaN;

    // target price for default profit
    const profitPerShareDefault = qty > 0 ? (profitDefault / qty) : 0;
    const targetDefault = (qty > 0) ? (side === 'BUY' ? (entry + profitPerShareDefault) : (entry - profitPerShareDefault)) : NaN;

    // update grouped key values (big)
    document.getElementById('qtyVal').textContent = qty > 0 ? String(qty) : '—';
    document.getElementById('slVal').textContent = qty > 0 ? fmt1(slPrice) : '—';
    document.getElementById('tpVal').textContent = qty > 0 ? fmt1(targetDefault) : '—';

    // update extras
    document.getElementById('usableVal').textContent = fmt1(usable);
    document.getElementById('riskVal').textContent = fmt1(risk);
    document.getElementById('rpsVal').textContent = qty>0 ? fmt1(riskPerShare) : '—';
    document.getElementById('profitVal').textContent = fmt1(profitDefault);
    document.getElementById('ppsVal').textContent = qty>0 ? fmt1(profitPerShareDefault) : '—';

    document.getElementById('entryShow').textContent = entry>0 ? fmt1(entry) : '—';

    // Build profit table rows (500 -> 10000)
    const tbody = document.getElementById('profitBody');
    tbody.innerHTML = '';
    for (let p = 500; p <= 10000; p += 500){
      const pps = qty > 0 ? (p / qty) : 0;
      const target = qty > 0 ? (side === 'BUY' ? (entry + pps) : (entry - pps)) : NaN;
      const tr = document.createElement('tr');

      const tdProfit = document.createElement('td');
      tdProfit.textContent = p.toLocaleString('en-IN');
      tr.appendChild(tdProfit);

      const tdTarget = document.createElement('td');
      tdTarget.className = 'right';
      tdTarget.textContent = qty>0 ? fmt1(target) : '—';
      tr.appendChild(tdTarget);

      const tdQty = document.createElement('td');
      tdQty.className = 'right';
      tdQty.textContent = qty>0 ? String(qty) : '—';
      tr.appendChild(tdQty);

      tbody.appendChild(tr);
    }

    // CSV for copy (Profit, TargetPrice, Qty only per request)
    window._lastCSV = (() => {
      const lines = [['Profit Target (₹)','Target Price (₹)','Qty']];
      for (let p = 500; p <= 10000; p += 500){
        const pps = qty > 0 ? (p / qty) : 0;
        const target = qty > 0 ? (side === 'BUY' ? (entry + pps) : (entry - pps)) : '';
        lines.push([p, qty>0?fmt1(target):'', qty>0?qty:'']);
      }
      return lines.map(r => r.join(',')).join('\n');
    })();
  }

  // wire up controls
  document.getElementById('calc').addEventListener('click', calcAll);
  document.getElementById('copyCSV').addEventListener('click', () => {
    if (!window._lastCSV){ alert('Calculate first'); return; }
    navigator.clipboard.writeText(window._lastCSV).then(()=> alert('Targets copied as CSV to clipboard!'));
  });

  // live updates
  document.querySelectorAll('input[name="side"]').forEach(el => el.addEventListener('change', calcAll));
  ['entry','capital','leverage','risk','profitDefault'].forEach(id => document.getElementById(id).addEventListener('input', calcAll));

  // initial
  calcAll();

</script>
</body>
</html>
